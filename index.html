<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼ ì‹¤íŒ¨ í™•ë¥  ê³„ì‚°ê¸°</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Pretendard:wght@400;600;700&display=swap');
    :root {
      --bg-a: #0f172a;
      --bg-b: #1e293b;
      --accent: #ff5f6d;
      --accent-2: #ffc371;
      --mint: #63f3c1;
    }
    body {
      font-family: 'Pretendard', 'Space Grotesk', system-ui, -apple-system, sans-serif;
      background: radial-gradient(circle at 20% 20%, rgba(255, 99, 146, 0.15), transparent 35%),
                  radial-gradient(circle at 80% 10%, rgba(99, 243, 193, 0.18), transparent 30%),
                  radial-gradient(circle at 50% 80%, rgba(255, 195, 113, 0.15), transparent 35%),
                  linear-gradient(145deg, var(--bg-a), var(--bg-b));
      color: #e2e8f0;
      min-height: 100vh;
    }
    .glass {
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.35);
      backdrop-filter: blur(8px);
    }
  </style>
</head>
<body class="pb-16">
  <div class="max-w-5xl mx-auto px-4 pt-12">
    <header class="flex flex-col gap-4 text-center md:text-left md:flex-row md:items-center md:justify-between">
      <div>
        <p class="text-sm uppercase tracking-[0.3em] text-slate-300">ğŸ Xmas Lab</p>
        <h1 class="text-3xl md:text-4xl font-bold text-white leading-tight mt-2">
          í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼ ì‹¤íŒ¨ í™•ë¥  ê³„ì‚°ê¸°
        </h1>
        <p class="text-slate-300 mt-3 max-w-2xl">
          â€œì´ ì„ ë¬¼, ì‹¸ëŠ˜í•´ì§ˆ í™•ë¥ ì€?â€ ê°ì •í˜• + ê³„ì‚°ê¸° = í¼ë‹ˆí¼ë‹ˆ ê³µì‹.
          ì›ƒê¸°ì§€ë§Œ, í•´ë³´ë©´ ê³ ê°œ ë„ë•ì´ëŠ” í•©ë¦¬ì  ìœ„í—˜ë„ ë¦¬í¬íŠ¸.
        </p>
      </div>
      <div class="glass rounded-2xl px-4 py-3 text-sm text-slate-200">
        <div class="font-semibold text-white">ê¸°ë³¸ ì„±ê³µë¥  70%</div>
        <div class="text-slate-300">ê´€ê³„ Â· ì˜ˆì‚° Â· ì„ ë¬¼ Â· ì„±í–¥ Â· íŒíŠ¸ë¡œ ë¦¬ìŠ¤í¬ ì°¨ê°</div>
      </div>
    </header>

    <main class="grid md:grid-cols-5 gap-6 mt-10">
      <section class="md:col-span-3 glass rounded-3xl p-6">
        <h2 class="text-xl font-semibold text-white mb-4">ì…ë ¥ê°’</h2>
        <div class="grid md:grid-cols-2 gap-4">
          <label class="block">
            <span class="text-slate-300 text-sm">ê´€ê³„</span>
            <select id="relationship" class="mt-1 w-full rounded-xl bg-slate-900/60 border border-slate-700 text-white p-3">
              <option value="lover">ì—°ì¸ (ê¸°ëŒ€ì¹˜ â†‘)</option>
              <option value="fling">ì¸ (ë¦¬ìŠ¤í¬ ìµœê³ )</option>
              <option value="spouse">ë¶€ë¶€ (ì‹¤ìš©ì„± ì¤‘ìš”)</option>
              <option value="work">íšŒì‚¬/ì§€ì¸ (ì•ˆì „ì„±)</option>
            </select>
          </label>

          <label class="block">
            <span class="text-slate-300 text-sm">ì˜ˆì‚°</span>
            <select id="budget" class="mt-1 w-full rounded-xl bg-slate-900/60 border border-slate-700 text-white p-3">
              <option value="low">1~3ë§Œ</option>
              <option value="mid">3~7ë§Œ</option>
              <option value="high">7~15ë§Œ</option>
              <option value="premium">15ë§Œ ì´ìƒ</option>
            </select>
          </label>

          <label class="block">
            <span class="text-slate-300 text-sm">ì„ ë¬¼ ìœ í˜•</span>
            <select id="giftType" class="mt-1 w-full rounded-xl bg-slate-900/60 border border-slate-700 text-white p-3">
              <option value="practical">ğŸ§ ì‹¤ìš©í˜• (ì „ìê¸°ê¸°, ì†Œëª¨í’ˆ)</option>
              <option value="emotional">ğŸ¨ ê°ì„±í˜• (í–¥ìˆ˜, í¸ì§€, ì†Œí’ˆ)</option>
              <option value="fashion">ğŸ‘• íŒ¨ì…˜í˜• (ì˜ë¥˜, ì•¡ì„¸ì„œë¦¬)</option>
              <option value="joke">ğŸ˜‚ ë“œë¦½í˜• (ë°ˆ, ì›ƒê¸´ ì„ ë¬¼)</option>
              <option value="experience">ğŸ« ê²½í—˜í˜• (í‹°ì¼“, ì²´í—˜)</option>
            </select>
          </label>

          <label class="block">
            <span class="text-slate-300 text-sm">ìƒëŒ€ ì„±í–¥</span>
            <select id="persona" class="mt-1 w-full rounded-xl bg-slate-900/60 border border-slate-700 text-white p-3">
              <option value="practical">ğŸ§  ì‹¤ìš©íŒŒ</option>
              <option value="sensitive">ğŸ’– ê°ì„±íŒŒ</option>
              <option value="picky">ğŸ˜ ì·¨í–¥ í™•ê³ </option>
              <option value="unknown">ğŸ¤·â€â™€ï¸ ì˜ ëª¨ë¥´ê² ìŒ (+15%)</option>
            </select>
          </label>

          <label class="block md:col-span-2">
            <span class="text-slate-300 text-sm">ì‚¬ì „ íŒíŠ¸</span>
            <select id="hint" class="mt-1 w-full rounded-xl bg-slate-900/60 border border-slate-700 text-white p-3">
              <option value="told">âœ”ï¸ ì§ì ‘ ë§í•´ì¤Œ</option>
              <option value="mentioned">âœ”ï¸ ì˜ˆì „ì— ì–¸ê¸‰í•¨</option>
              <option value="guess">âŒ ëˆˆì¹˜ë¡œ ê³ ë¦„</option>
              <option value="vibe">âŒ ê·¸ëƒ¥ ëŠë‚Œ (+20%)</option>
            </select>
          </label>
        </div>

        <button id="calculateBtn" class="mt-6 w-full md:w-auto px-6 py-3 rounded-xl font-semibold bg-gradient-to-r from-rose-500 via-orange-400 to-amber-300 text-slate-900 hover:scale-[1.01] transition">
          ì‹¤íŒ¨ í™•ë¥  ê³„ì‚°í•˜ê¸°
        </button>
      </section>

      <section class="md:col-span-2 glass rounded-3xl p-6 flex flex-col gap-4">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-slate-300">ì˜ˆìƒ ì„±ê³µë¥ </p>
            <p id="successRate" class="text-4xl font-bold text-white mt-1">70%</p>
          </div>
          <div class="text-right">
            <p class="text-sm text-slate-300">ì¬ì•™ ë ˆë²¨</p>
            <p id="disasterLevel" class="text-lg font-semibold text-rose-200">ğŸ˜… ì†Œì†Œí•œ ì¹¨ë¬µ</p>
          </div>
        </div>

        <div class="rounded-2xl bg-slate-900/50 border border-slate-800 p-4">
          <p class="text-sm text-slate-400">ë³´ì¡° ë©˜íŠ¸</p>
          <p id="subText" class="text-lg font-semibold text-white mt-1">
            ìƒëŒ€ê°€ ì›ƒì„ ìˆ˜ë„ ìˆê³ , ê·¸ ì›ƒìŒì´ ì˜¤ë˜ê°€ì§„ ì•Šì„ í™•ë¥ ì´ í½ë‹ˆë‹¤.
          </p>
        </div>

        <div class="rounded-2xl bg-slate-900/50 border border-slate-800 p-4 space-y-2">
          <p class="text-sm text-slate-400">ğŸ˜¬ ì˜ˆìƒ ì‹¤íŒ¨ ë©˜íŠ¸</p>
          <p id="failLine" class="text-white font-semibold">â€œì´ê±° ì–´ë””ì„œ ìƒ€ì–´?â€ (ì§„ì§œ ê¶ê¸ˆí•´ì„œ ì•„ë‹˜)</p>
          <p id="iceSpeed" class="text-slate-300 text-sm">â„ï¸ ì‹¸ëŠ˜í•´ì§€ëŠ” ì†ë„: í•˜ë£¨ ë’¤</p>
        </div>

        <div class="rounded-2xl bg-slate-900/50 border border-slate-800 p-4">
          <p class="text-sm text-slate-400">âœ… ì•ˆì „í•œ ëŒ€ì•ˆ</p>
          <ul id="safeList" class="text-white font-semibold space-y-1 list-disc list-inside">
            <li>ğŸ« ê²½í—˜í˜• êµì²´ ì¶”ì²œ</li>
            <li>ğŸ ê¸°í”„íŠ¸ì¹´ë“œ + ë©”ì‹œì§€ ì¡°í•©</li>
            <li>ğŸ§¾ â€œì„ ë¬¼ + ì„ íƒê¶Œâ€ ì „ëµ</li>
          </ul>
        </div>

        <div class="rounded-2xl bg-slate-900/50 border border-slate-800 p-4">
          <p class="text-sm text-slate-400">ğŸ”¥ ê³µìœ ìš© ë¬¸êµ¬</p>
          <p id="shareText" class="text-white font-semibold text-sm leading-relaxed">
            â€œë‚´ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼, ì‹¤íŒ¨ í™•ë¥  58% ë‚˜ì˜´. ì™œ ë²Œì¨ ì‹¸ëŠ˜í•´ì¡ŒëŠ”ì§€ ì´í•´ ì™„ë£Œ.â€
          </p>
        </div>
      </section>
    </main>
  </div>

  <script>
    const relationshipPenalty = {
      lover: 12,
      fling: 12 * 1.4, // ê°ì • ë¦¬ìŠ¤í¬ ì¦í­
      spouse: 12 * 0.7, // ì‹¤ë§ ë¦¬ìŠ¤í¬ ê°ì†Œ
      work: 6
    };

    const budgetPenalty = {
      lover: { low: 12, mid: 4, high: 0, premium: -2 },
      fling: { low: 10, mid: 4, high: 2, premium: 8 }, // ê³¼í•œ ì§„ì‹¬/ë¶€ë‹´
      spouse: { low: 6, mid: 0, high: -2, premium: 2 },
      work: { low: 0, mid: 2, high: 6, premium: 10 }
    };

    const giftRisk = {
      practical: 4,
      emotional: 8,
      fashion: 14,
      joke: 16,
      experience: 2
    };

    const matchPenalty = {
      practical: { practical: 0, sensitive: 4, picky: 6, unknown: 8 },
      emotional: { practical: 6, sensitive: 0, picky: 6, unknown: 8 },
      fashion: { practical: 8, sensitive: 4, picky: 12, unknown: 10 },
      joke: { practical: 10, sensitive: 12, picky: 14, unknown: 10 },
      experience: { practical: 0, sensitive: 0, picky: 4, unknown: 6 }
    };

    const hintPenalty = { told: 0, mentioned: 2, guess: 10, vibe: 20 };
    const unknownBonus = 15; // ì˜ ëª¨ë¥´ê² ìŒ íŒ¨ë„í‹°

    const failLines = {
      lover: [
        'â€œì´ê±° ì–´ë””ì„œ ìƒ€ì–´?â€ (ì§„ì§œ ê¶ê¸ˆí•´ì„œ ì•„ë‹˜)',
        'â€œë„ˆë‹µë‹¤â€¦â€ (ì¹­ì°¬ ì•„ë‹ ìˆ˜ ìˆìŒ)',
        'â€œì´ê±´â€¦ ë„ˆê°€ ì“°ëŠ” ê²Œ ë” ì–´ìš¸ë¦´ ë“¯?â€'
      ],
      fling: [
        'â€œì™€â€¦ íŠ¹ì´í•˜ë‹¤â€¦!â€ (ë’¤ì— ë§ ì‡ê¸° ì–´ë ¤ì›€)',
        'â€œì•„â€¦ ê³ ë§ˆì›Œ!â€ (ê·¸ í›„ ì¹´í†¡ ëŠë ¤ì§)',
        'â€œì˜¤â€¦ ì¬ë°Œë„¤?â€ (í‘œì •ì´ ì•ˆ ì¬ë°ŒìŒ)'
      ],
      spouse: [
        'â€œì˜ìˆ˜ì¦â€¦ í˜¹ì‹œ ìˆì–´?â€',
        'â€œìš°ë¦¬ ì§‘ì— ì´ê±°ë‘ ë¹„ìŠ·í•œ ê±° ë˜ ìˆì§€ ì•Šì•„?â€',
        'â€œê³ ë§ˆìš´ë°â€¦ ìš°ë¦¬ ìƒí™œë¹„ ê´œì°®ì§€?â€'
      ],
      work: [
        'â€œì™€â€¦ íŠ¹ì´í•˜ì‹œë„¤ìš”â€',
        'â€œì•„ ì´ëŸ° ê±¸â€¦!â€ (ì„œëí–‰ í™•ì •)',
        'â€œíŒ€ì›ë“¤ê³¼ ê°™ì´ ì¨ë„ ë˜ì£ ?â€'
      ]
    };

    const disasterLevels = [
      { threshold: 80, label: 'ğŸ§Š ê´€ê³„ ê¸°ì˜¨ ê¸‰ê°•í•˜' },
      { threshold: 60, label: 'ğŸ˜ ëŒ€í™” ì˜¨ë„ í•˜ë½' },
      { threshold: 40, label: 'ğŸ˜… ì†Œì†Œí•œ ì¹¨ë¬µ' },
      { threshold: 0, label: 'ğŸ„ í›ˆí›ˆ ëª¨ë“œ' }
    ];

    const subtexts = [
      'ìƒëŒ€ê°€ ì›ƒì„ ìˆ˜ë„ ìˆê³ , ê·¸ ì›ƒìŒì´ ì˜¤ë˜ê°€ì§„ ì•Šì„ í™•ë¥ ì´ í½ë‹ˆë‹¤.',
      'ê°ì •ì€ ì„¬ì„¸í•©ë‹ˆë‹¤. ì˜ˆì‚°ê³¼ ì·¨í–¥ì´ ì‚´ì§ ë¹—ë‚˜ê°„ ëŠë‚Œ.',
      'â€œì•„â€¦ ë§ë„¤â€ ì‹¶ì€ ë””í…Œì¼ë§Œ ì±™ê¸°ë©´ ë°˜ì „ ê°€ëŠ¥.'
    ];

    const alternatives = [
      'ğŸ« ê²½í—˜í˜• êµì²´ ì¶”ì²œ (ê³µì—°/ì „ì‹œ/í‹°ì¼“)',
      'ğŸ ê¸°í”„íŠ¸ì¹´ë“œ + ì†í¸ì§€ ì¡°í•©',
      'ğŸ§¾ â€œì„ ë¬¼ + ì„ íƒê¶Œâ€ ì „ëµ: ì˜µì…˜ 3ê°œ ì¤‘ ê³ ë¥´ê¸°',
      'ğŸ½ï¸ ì‹ì‚¬/ë””ì €íŠ¸ + ì‘ì€ ì‹¤ìš©í…œ ì„¸íŠ¸',
      'ğŸ“¦ ë°˜í’ˆê¶Œ/í¬ì¥ì— â€œë§ˆìŒì— ì•ˆ ë“¤ë©´ ê°™ì´ ë°”ê¾¸ìâ€ ì ì–´ë‘ê¸°'
    ];

    const iceSpeed = (fail) => {
      if (fail >= 65) return 'â„ï¸ ì¦‰ì‹œ (ë°›ìë§ˆì í‘œì • ê´€ë¦¬)';
      if (fail >= 45) return 'â³ í•˜ë£¨ ë’¤ (í¥ë¶„ ì‹ê³  í˜„ì‹¤ ì§ë©´)';
      if (fail >= 25) return 'ğŸ“¦ ë©°ì¹  ë’¤ ì •ë¦¬í•˜ë‹¤ ë°œê²¬';
      return 'ğŸ”¥ ì•ˆ ì‹¸ëŠ˜í•¨, ì˜¤íˆë ¤ ë”°ëœ»';
    };

    function clampRate(n) {
      return Math.max(5, Math.min(95, Math.round(n)));
    }

    function pickRandom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function calculate() {
      const relationship = document.getElementById('relationship').value;
      const budget = document.getElementById('budget').value;
      const giftType = document.getElementById('giftType').value;
      const persona = document.getElementById('persona').value;
      const hint = document.getElementById('hint').value;

      let success = 70;
      let penalty = 0;

      penalty += relationshipPenalty[relationship] || 0;
      penalty += budgetPenalty[relationship][budget] || 0;
      penalty += giftRisk[giftType] || 0;
      penalty += matchPenalty[giftType][persona] || 0;
      penalty += hintPenalty[hint] || 0;
      if (persona === 'unknown') penalty += unknownBonus;

      const final = clampRate(success - penalty);
      const fail = 100 - final;

      document.getElementById('successRate').textContent = `${final}%`;
      document.getElementById('disasterLevel').textContent = disasterLevels.find(d => fail >= d.threshold).label;
      document.getElementById('subText').textContent = pickRandom(subtexts);
      document.getElementById('failLine').textContent = pickRandom(failLines[relationship]);
      document.getElementById('iceSpeed').textContent = iceSpeed(fail);

      const safePicks = alternatives.sort(() => 0.5 - Math.random()).slice(0, 3);
      document.getElementById('safeList').innerHTML = safePicks.map(item => `<li>${item}</li>`).join('');

      const share = `â€œë‚´ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼, ì‹¤íŒ¨ í™•ë¥  ${fail}% ë‚˜ì˜´. ì™œ ë²Œì¨ ì‹¸ëŠ˜í•´ì¡ŒëŠ”ì§€ ì´í•´ ì™„ë£Œ.â€`;
      document.getElementById('shareText').textContent = share;
    }

    document.getElementById('calculateBtn').addEventListener('click', calculate);
    calculate();
  </script>
</body>
</html>
