<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n-title="metaTitle">í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼, ë”°ëœ»í•¨ ë¦¬í¬íŠ¸ ğŸ</title>
    <meta
      name="description"
      content="í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼ ì‹¤íŒ¨ í™•ë¥  ëŒ€ì‹  ë”°ëœ»í•¨ì„ ê³„ì‚°í•´ì£¼ëŠ” íë§í˜• í…ŒìŠ¤íŠ¸. ì—°ì¸/ì¸/ë¶€ë¶€/ì§€ì¸, ì˜ˆì‚°, ì„ ë¬¼ ìœ í˜•, ì„±í–¥, íŒíŠ¸ë¡œ ì„±ê³µë¥ ì„ í™•ì¸í•˜ê³  í–‰ìš´ ë©”ì‹œì§€ë¥¼ ë°›ì•„ë³´ì„¸ìš”."
    />
    <meta
      name="keywords"
      content="í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼ ì‹¤íŒ¨ í™•ë¥ , ì—°ì¸ ì„ ë¬¼ ì„±ê³µë¥ , ì¸ ì„ ë¬¼ ì¶”ì²œ, ë¶€ë¶€ ì„ ë¬¼, íšŒì‚¬ ì§€ì¸ ì„ ë¬¼, ì„ ë¬¼ í…ŒìŠ¤íŠ¸, ë”°ëœ»í•¨ ë¦¬í¬íŠ¸"
    />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼, ë”°ëœ»í•¨ ë¦¬í¬íŠ¸ ğŸ" />
    <meta
      property="og:description"
      content="ì„ ë¬¼ ì‹¤íŒ¨ í™•ë¥  ëŒ€ì‹  ë”°ëœ»í•¨ì„ ì•Œë ¤ì£¼ëŠ” ì„¤ë¬¸í˜• í…ŒìŠ¤íŠ¸. ê´€ê³„Â·ì˜ˆì‚°Â·ì„ ë¬¼Â·ì„±í–¥Â·íŒíŠ¸ë¡œ ì„±ê³µë¥ ê³¼ í–‰ìš´ ë©”ì‹œì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”."
    />
    <meta
      property="og:image"
      content="https://dummyimage.com/1200x630/1f2937/f9fafb&text=X-MAS+PICK"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼, ë”°ëœ»í•¨ ë¦¬í¬íŠ¸ ğŸ" />
    <meta
      name="twitter:description"
      content="ì„ ë¬¼ ë”°ëœ»í•¨ì„ ê³„ì‚°í•´ì£¼ëŠ” íë§í˜• í…ŒìŠ¤íŠ¸. ê´€ê³„Â·ì˜ˆì‚°Â·ì„ ë¬¼Â·ì„±í–¥Â·íŒíŠ¸ë¡œ ì„±ê³µë¥ ê³¼ í–‰ìš´ ë©”ì‹œì§€ í™•ì¸."
    />
    <meta
      name="twitter:image"
      content="https://dummyimage.com/1200x630/1f2937/f9fafb&text=X-MAS+PICK"
    />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼, ë”°ëœ»í•¨ ë¦¬í¬íŠ¸",
        "description": "í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼ ì‹¤íŒ¨ í™•ë¥  ëŒ€ì‹  ë”°ëœ»í•¨ì„ ì•Œë ¤ì£¼ëŠ” ì„¤ë¬¸í˜• í…ŒìŠ¤íŠ¸. ê´€ê³„, ì˜ˆì‚°, ì„ ë¬¼ ìœ í˜•, ì„±í–¥, íŒíŠ¸ë¡œ ì„±ê³µë¥ ê³¼ í–‰ìš´ ë©”ì‹œì§€ë¥¼ í™•ì¸.",
        "inLanguage": "ko"
      }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap");

      :root {
        --bg-0: #fff7ed;
        --bg-1: #fff1f2;
        --card: rgba(255, 255, 255, 0.75);
        --border: rgba(15, 23, 42, 0.1);
        --text-0: #0b1220;
        --text-1: rgba(11, 18, 32, 0.75);
        --text-2: rgba(11, 18, 32, 0.55);
        --rose: #ff4d8d;
        --warm: #ffb97a;
        --ring: rgba(255, 77, 141, 0.18);
        --shadow: 0 18px 50px rgba(15, 23, 42, 0.12);
      }

      body {
        font-family: Pretendard, system-ui;
        background: radial-gradient(
            900px 520px at 15% 10%,
            rgba(255, 185, 122, 0.25),
            transparent 60%
          ),
          radial-gradient(
            800px 500px at 85% 15%,
            rgba(255, 77, 141, 0.2),
            transparent 55%
          ),
          linear-gradient(160deg, var(--bg-0), var(--bg-1));
        min-height: 100vh;
        color: var(--text-1);
      }

      .glass {
        background: var(--card);
        border: 1px solid var(--border);
        box-shadow: var(--shadow);
        backdrop-filter: blur(10px);
      }

      .option {
        border: 1px solid var(--border);
        border-radius: 1rem;
        padding: 1rem;
        cursor: pointer;
        transition: 0.2s;
        background: rgba(255, 255, 255, 0.6);
      }
      .option:hover {
        transform: translateY(-1px);
        box-shadow: 0 0 0 4px var(--ring);
      }
    </style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1204894220949193"
     crossorigin="anonymous"></script>
    <!-- responsive-base -->
    <style>
      /* responsive-base */
      *, *::before, *::after {
        box-sizing: border-box;
      }
      html {
        -webkit-text-size-adjust: 100%;
      }
      img,
      video,
      canvas,
      svg {
        max-width: 100%;
        height: auto;
      }
      table {
        width: 100%;
      }
      pre,
      code {
        white-space: pre-wrap;
        word-break: break-word;
      }
    </style>
  <style>
    .adsense-block {
      margin: 16px 0;
      display: flex;
      justify-content: center;
    }
    .adsbygoogle {
      display: block;
      margin: 16px auto;
        text-align: center;
}
  </style>
  <style>
    .lang-switch {
      position: fixed;
      top: 16px;
      right: 16px;
      display: inline-flex;
      gap: 0;
      padding: 3px;
      border-radius: 999px;
      background: rgba(255, 247, 237, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.12);
      z-index: 1000;
    }
    .lang-switch button {
      border: none;
      background: transparent;
      color: rgba(11, 18, 32, 0.7);
      font-size: 12px;
      font-weight: 700;
      padding: 7px 14px;
      border-radius: 999px;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 44px;
      text-align: center;
      letter-spacing: 0.02em;
    }
    .lang-switch button.active {
      background: #ff4d8d;
      color: #ffffff;
      box-shadow: 0 2px 8px rgba(255, 77, 141, 0.4);
    }
    .lang-switch button:not(.active):hover {
      background: rgba(255, 77, 141, 0.2);
      color: rgba(11, 18, 32, 0.9);
    }
  </style>
</head>

  <body class="flex items-center justify-center px-4 py-16">
    <div class="lang-switch" role="tablist" aria-label="Language switcher">
      <button type="button" data-lang="ko" class="active">KR</button>
      <button type="button" data-lang="en">EN</button>
    </div><div class="max-w-xl w-full glass rounded-3xl p-6 md:p-8">
      <!-- HEADER -->
      <header class="text-center mb-8">
        <p class="text-sm tracking-[0.3em] uppercase text-[var(--text-2)]">
          ğŸ„ X-MAS PICK
        </p>
        <h1 class="text-2xl md:text-3xl font-bold mt-2 text-[var(--text-0)]" data-i18n="title">
          í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼, ë”°ëœ»í•¨ ë¦¬í¬íŠ¸
        </h1>
      </header>

      <!-- QUESTION -->
      <section id="questionBox" class="space-y-4"></section>

      <!-- RESULT -->
      <section id="resultBox" class="hidden text-center space-y-6">
        <div>
          <p class="text-sm text-[var(--text-2)]" data-i18n="resultRateLabel">
            ğŸ¯ ì„ ë¬¼ì´ ë”°ëœ»í•˜ê²Œ ë„ì°©í•  í™•ë¥ 
          </p>
          <p id="rate" class="text-4xl font-bold text-[var(--text-0)] mt-1">
            80%
          </p>
        </div>

        <div class="glass rounded-2xl p-4">
          <p id="temperature" class="font-semibold text-lg">
            ğŸ„ í¬ê·¼í¬ê·¼ í¬ë¦¬ìŠ¤ë§ˆìŠ¤
          </p>
          <p id="comment" class="mt-2 text-sm"></p>
        </div>

        <div class="glass rounded-2xl p-4 text-sm">
          <p class="font-semibold mb-2" data-i18n="tipsTitle">ğŸ ë” ë”°ëœ»í•´ì§€ëŠ” ì„ íƒ</p>
          <ul id="tips" class="list-disc list-inside space-y-1 text-left"></ul>
        </div>

        <div class="text-sm text-[var(--text-2)] leading-relaxed">
          <span data-i18n="merryChristmas">ğŸ„ ë©”ë¦¬ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ğŸ„</span>
        </div>

        <!-- RESULT CTA -->
        <div
          class="flex justify-center pt-6"
          style="border-top: 1px solid var(--border)"
        >
          <a
            href="https://funnyfunny.cloud/"
            target="_blank"
            rel="noopener noreferrer"
            class="px-6 py-3 rounded-xl font-semibold transition active:scale-[0.99]"
            style="
              background: linear-gradient(90deg, var(--rose), var(--warm));
              color: #0b1220;
              box-shadow: var(--shadow);
            "
            data-i18n="btnOtherServices"
          >
            ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸°
          </a>
        </div>
      </section>
    </div>

    <script>
      // =========================
      // i18n
      // =========================
      const translations = {
        ko: {
          metaTitle: "í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼, ë”°ëœ»í•¨ ë¦¬í¬íŠ¸ ğŸ",
          title: "í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì„ ë¬¼,<br />ë”°ëœ»í•¨ ë¦¬í¬íŠ¸",
          resultRateLabel: "ğŸ¯ ì„ ë¬¼ì´ ë”°ëœ»í•˜ê²Œ ë„ì°©í•  í™•ë¥ ",
          tipsTitle: "ğŸ ë” ë”°ëœ»í•´ì§€ëŠ” ì„ íƒ",
          merryChristmas: "ğŸ„ ë©”ë¦¬ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ğŸ„",
          btnOtherServices: "ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸°",
          questionRelationship: "ëˆ„êµ¬ì—ê²Œ ì£¼ëŠ” ì„ ë¬¼ì¸ê°€ìš”?",
          questionBudget: "ì´ë²ˆ ì„ ë¬¼ ì˜ˆì‚°ì€?",
          questionGift: "ì„ ë¬¼ íƒ€ì…ì€?",
          questionPersona: "ìƒëŒ€ ì„±í–¥ì€?",
          optionLover: "ğŸ’‘ ì—°ì¸",
          optionFling: "ğŸŒ± ì¸",
          optionSpouse: "ğŸ’ ë¶€ë¶€",
          optionWork: "ğŸ¢ íšŒì‚¬/ì§€ì¸",
          optionLow: "1~3ë§Œ",
          optionMid: "3~7ë§Œ",
          optionHigh: "7~15ë§Œ",
          optionPremium: "15ë§Œ ì´ìƒ",
          optionPractical: "ğŸ§ ì‹¤ìš©í˜•",
          optionEmotional: "ğŸ¨ ê°ì„±í˜•",
          optionFashion: "ğŸ‘• íŒ¨ì…˜í˜•",
          optionExperience: "ğŸ« ê²½í—˜í˜•",
          optionPracticalPersona: "ğŸ§  ì‹¤ìš©íŒŒ",
          optionSensitive: "ğŸ’– ê°ì„±íŒŒ",
          optionPicky: "ğŸ˜ ì·¨í–¥ í™•ê³ ",
          optionUnknown: "ğŸ¤·â€â™€ï¸ ì˜ ëª¨ë¥´ê² ìŒ",
          tip1: "ğŸ« ê²½í—˜í˜• ì„ ë¬¼ì€ ê¸°ì–µì— ì˜¤ë˜ ë‚¨ì•„ìš”",
          tip2: "ğŸ“ ì§§ì€ ì¹´ë“œ í•œ ì¤„ì´ ì²´ê°ì„ ë°”ê¿”ìš”",
          tip3: "ğŸ ê°™ì´ ê³ ë¥´ìê³  ë§í•´ë„ ì¶©ë¶„íˆ ì¢‹ì•„ìš”",
          tip4: "ğŸ° ì‘ì€ ë””ì €íŠ¸ í•˜ë‚˜ ì¶”ê°€í•´ë³´ì„¸ìš”",
          temperatureCozy: "ğŸ„ í¬ê·¼í¬ê·¼ í¬ë¦¬ìŠ¤ë§ˆìŠ¤",
          temperatureWarm: "ğŸ”¥ ì˜¨ê¸° ìœ ì§€ ì¤‘",
          temperaturePerfect: "ğŸ§£ ë”°ëœ»í•˜ê²Œ ë§ˆë¬´ë¦¬í•˜ë©´ ì™„ë²½",
          commentDefault: "ì´ë¯¸ ì¶©ë¶„íˆ ì˜í•˜ê³  ìˆì–´ìš”.<br />í¬ë¦¬ìŠ¤ë§ˆìŠ¤ëŠ” ë§ˆìŒì´ ë” ì¤‘ìš”í•œ ë‚ ì´ì—ìš”.",
        },
        en: {
          metaTitle: "Christmas Gift, Warmth Report ğŸ",
          title: "Christmas Gift,<br />Warmth Report",
          resultRateLabel: "ğŸ¯ Probability of warm gift arrival",
          tipsTitle: "ğŸ Choices to make it warmer",
          merryChristmas: "ğŸ„ Merry Christmas ğŸ„",
          btnOtherServices: "View Other Services",
          questionRelationship: "Who is this gift for?",
          questionBudget: "What's your gift budget?",
          questionGift: "What type of gift?",
          questionPersona: "What's their personality?",
          optionLover: "ğŸ’‘ Lover",
          optionFling: "ğŸŒ± Casual",
          optionSpouse: "ğŸ’ Spouse",
          optionWork: "ğŸ¢ Colleague/Friend",
          optionLow: "10~30K KRW",
          optionMid: "30~70K KRW",
          optionHigh: "70~150K KRW",
          optionPremium: "150K+ KRW",
          optionPractical: "ğŸ§ Practical",
          optionEmotional: "ğŸ¨ Emotional",
          optionFashion: "ğŸ‘• Fashion",
          optionExperience: "ğŸ« Experience",
          optionPracticalPersona: "ğŸ§  Practical",
          optionSensitive: "ğŸ’– Sensitive",
          optionPicky: "ğŸ˜ Picky",
          optionUnknown: "ğŸ¤·â€â™€ï¸ Unknown",
          tip1: "ğŸ« Experience gifts last longer in memory",
          tip2: "ğŸ“ A short card line changes the feeling",
          tip3: "ğŸ Saying 'let's choose together' is good enough",
          tip4: "ğŸ° Add a small dessert",
          temperatureCozy: "ğŸ„ Cozy Christmas",
          temperatureWarm: "ğŸ”¥ Keeping Warm",
          temperaturePerfect: "ğŸ§£ Perfect if finished warmly",
          commentDefault: "You're already doing well enough.<br />Christmas is a day when the heart matters more.",
        },
      };

      const defaultLang = "ko";
      const supportedLangs = ["ko", "en"];
      let currentLang = defaultLang;

      function t(key, vars = {}) {
        const langTable = translations[currentLang] || translations.ko;
        let template = langTable?.[key] ?? translations.ko?.[key] ?? key;
        if (typeof template !== "string") return template;
        Object.keys(vars).forEach((k) => {
          template = template.replace(new RegExp(`\\{${k}\\}`, "g"), vars[k]);
        });
        return template;
      }

      function applyTranslations() {
        document.title = t("metaTitle");
        document.documentElement.lang = currentLang;
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          const translated = t(el.dataset.i18n);
          if (translated.includes("<br") || translated.includes("<br />") || translated.includes("<br/>")) {
            el.innerHTML = translated;
          } else {
            el.textContent = translated;
          }
        });
        document.querySelectorAll("[data-i18n-html]").forEach((el) => {
          el.innerHTML = t(el.dataset.i18nHtml);
        });
        document.querySelectorAll("[data-i18n-title]").forEach((el) => {
          if (el.tagName === "TITLE") {
            el.textContent = t(el.dataset.i18nTitle);
          } else {
            el.title = t(el.dataset.i18nTitle);
          }
        });
        document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
          el.placeholder = t(el.dataset.i18nPlaceholder);
        });
        document.querySelectorAll("[data-i18n-aria]").forEach((el) => {
          el.setAttribute("aria-label", t(el.dataset.i18nAria));
        });
        document.querySelectorAll("[data-i18n-alt]").forEach((el) => {
          el.setAttribute("alt", t(el.dataset.i18nAlt));
        });
      }

      function detectLang() {
        const params = new URLSearchParams(window.location.search);
        const paramLang = params.get("lang");
        if (supportedLangs.includes(paramLang)) return paramLang;
        const stored = localStorage.getItem("preferredLang");
        if (supportedLangs.includes(stored)) return stored;
        const browserLang =
          navigator.languages && navigator.languages.length
            ? navigator.languages[0]
            : navigator.language;
        if (browserLang && browserLang.toLowerCase().startsWith("ko")) {
          return "ko";
        }
        return defaultLang;
      }

      function setLang(lang, options = {}) {
        const nextLang = supportedLangs.includes(lang) ? lang : defaultLang;
        currentLang = nextLang;
        window.currentLang = currentLang;
        document.documentElement.lang = nextLang;
        localStorage.setItem("preferredLang", nextLang);
        document.querySelectorAll(".lang-switch button").forEach((button) => {
          button.classList.toggle("active", button.dataset.lang === nextLang);
        });
        applyTranslations();
        if (options.updateUrl) {
          const url = new URL(window.location.href);
          url.searchParams.set("lang", nextLang);
          window.history.replaceState({}, "", url);
        }
        // Update dynamic content
        if (typeof step !== "undefined" && step !== null) {
          if (step < getQuestions().length) {
            renderQuestion();
          } else if (document.getElementById("resultBox") && !document.getElementById("resultBox").classList.contains("hidden")) {
            showResult();
          }
        }
      }

      document.querySelectorAll(".lang-switch button").forEach((button) => {
        button.addEventListener("click", () => {
          setLang(button.dataset.lang, { updateUrl: true });
        });
      });

      setLang(detectLang(), { updateUrl: false });

      // Make t() function and currentLang globally available
      window.t = t;
      window.currentLang = currentLang;
      window.setLang = setLang;

      /* ---------------- data ---------------- */

      const questions_base = [
        {
          id: "relationship",
          title: "ëˆ„êµ¬ì—ê²Œ ì£¼ëŠ” ì„ ë¬¼ì¸ê°€ìš”?",
          options: [
            { v: "lover", t: "ğŸ’‘ ì—°ì¸" },
            { v: "fling", t: "ğŸŒ± ì¸" },
            { v: "spouse", t: "ğŸ’ ë¶€ë¶€" },
            { v: "work", t: "ğŸ¢ íšŒì‚¬/ì§€ì¸" },
          ],
        },
        {
          id: "budget",
          title: "ì´ë²ˆ ì„ ë¬¼ ì˜ˆì‚°ì€?",
          options: [
            { v: "low", t: "1~3ë§Œ" },
            { v: "mid", t: "3~7ë§Œ" },
            { v: "high", t: "7~15ë§Œ" },
            { v: "premium", t: "15ë§Œ ì´ìƒ" },
          ],
        },
        {
          id: "gift",
          title: "ì„ ë¬¼ íƒ€ì…ì€?",
          options: [
            { v: "practical", t: "ğŸ§ ì‹¤ìš©í˜•" },
            { v: "emotional", t: "ğŸ¨ ê°ì„±í˜•" },
            { v: "fashion", t: "ğŸ‘• íŒ¨ì…˜í˜•" },
            { v: "experience", t: "ğŸ« ê²½í—˜í˜•" },
          ],
        },
        {
          id: "persona",
          title: "ìƒëŒ€ ì„±í–¥ì€?",
          options: [
            { v: "practical", t: "ğŸ§  ì‹¤ìš©íŒŒ" },
            { v: "sensitive", t: "ğŸ’– ê°ì„±íŒŒ" },
            { v: "picky", t: "ğŸ˜ ì·¨í–¥ í™•ê³ " },
            { v: "unknown", t: "ğŸ¤·â€â™€ï¸ ì˜ ëª¨ë¥´ê² ìŒ" },
          ],
        },
      ];

      const penalty = {
        // ê²°ê³¼ í™•ë¥  ë²”ìœ„: 82~100%ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ íŒ¨ë„í‹° ì´í•©ì„ ìµœëŒ€ 18ë¡œ ì„¤ê³„
        relationship: { lover: 4, fling: 7, spouse: 2, work: 1 },
        gift: { practical: 1, emotional: 2, fashion: 5, experience: 0 },
        persona: { practical: 0, sensitive: 0, picky: 3, unknown: 6 },
      };

      const tips_base = [
        { ko: "ğŸ« ê²½í—˜í˜• ì„ ë¬¼ì€ ê¸°ì–µì— ì˜¤ë˜ ë‚¨ì•„ìš”", en: "ğŸ« Experience gifts last longer in memory" },
        { ko: "ğŸ“ ì§§ì€ ì¹´ë“œ í•œ ì¤„ì´ ì²´ê°ì„ ë°”ê¿”ìš”", en: "ğŸ“ A short card line changes the feeling" },
        { ko: "ğŸ ê°™ì´ ê³ ë¥´ìê³  ë§í•´ë„ ì¶©ë¶„íˆ ì¢‹ì•„ìš”", en: "ğŸ Saying 'let's choose together' is good enough" },
        { ko: "ğŸ° ì‘ì€ ë””ì €íŠ¸ í•˜ë‚˜ ì¶”ê°€í•´ë³´ì„¸ìš”", en: "ğŸ° Add a small dessert" },
      ];

      function getTips() {
        const lang = window.currentLang || "ko";
        return tips_base.map((tip) => (lang === "ko" ? tip.ko : tip.en));
      }

      function getQuestions() {
        const lang = window.currentLang || "ko";
        const isKo = lang === "ko";
        return questions_base.map((q) => ({
          id: q.id,
          title: isKo ? q.title : t(`question${q.id.charAt(0).toUpperCase() + q.id.slice(1)}`),
          options: q.options.map((o) => {
            let key = `option${o.v.charAt(0).toUpperCase() + o.v.slice(1)}`;
            // personaì˜ practicalì€ optionPracticalPersonaë¥¼ ì‚¬ìš©
            if (q.id === "persona" && o.v === "practical") {
              key = "optionPracticalPersona";
            }
            return {
              v: o.v,
              t: isKo ? o.t : t(key),
            };
          }),
        }));
      }

      /* ---------------- logic ---------------- */

      let step = 0;
      let answer = {};
      const box = document.getElementById("questionBox");

      function renderQuestion() {
        const questions = getQuestions();
        const q = questions[step];
        box.innerHTML = `
    <h2 class="text-lg font-semibold text-center text-[var(--text-0)] mb-4">${
      q.title
    }</h2>
    <div class="grid grid-cols-1 gap-3">
      ${q.options
        .map(
          (o) =>
            `<div class="option" onclick="select('${q.id}','${o.v}')">${o.t}</div>`
        )
        .join("")}
    </div>
  `;
      }

      function select(id, val) {
        answer[id] = val;
        step++;
        const questions = getQuestions();
        if (step < questions.length) renderQuestion();
        else showResult();
      }

      function showResult() {
        const t = window.t || ((key, vars = {}) => key);
        const lang = window.currentLang || "ko";
        box.classList.add("hidden");
        document.getElementById("resultBox").classList.remove("hidden");

        let score = 100;
        score -= penalty.relationship[answer.relationship] || 0;
        score -= penalty.gift[answer.gift] || 0;
        score -= penalty.persona[answer.persona] || 0;
        score = Math.max(82, Math.min(100, score));

        document.getElementById("rate").textContent = score + "%";

        const temp =
          score >= 96
            ? t("temperatureCozy")
            : score >= 90
            ? t("temperatureWarm")
            : t("temperaturePerfect");

        document.getElementById("temperature").textContent = temp;

        const comment = t("commentDefault");
        document.getElementById("comment").innerHTML = comment;

        const tips = getTips();
        document.getElementById("tips").innerHTML = tips
          .sort(() => 0.5 - Math.random())
          .slice(0, 3)
          .map((tip) => `<li>${tip}</li>`)
          .join("");
      }

      renderQuestion();
    </script>
  
<ins class="adsbygoogle"
     style="display:block; text-align:center"
     data-ad-client="ca-pub-1204894220949193"
     data-ad-slot="5145068706"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
    
</body>
</html>
